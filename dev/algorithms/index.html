<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Fairness Algortihms · Fairness</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Fairness</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../fairtensor/">FairTensor</a></li><li><a class="tocitem" href="../measures/">Measures</a></li><li class="is-active"><a class="tocitem" href>Fairness Algortihms</a><ul class="internal"><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Preprocessing-Algorithms"><span>Preprocessing Algorithms</span></a></li><li><a class="tocitem" href="#Postprocessing"><span>Postprocessing</span></a></li><li><a class="tocitem" href="#Inprocessing"><span>Inprocessing</span></a></li><li><a class="tocitem" href="#Composability"><span>Composability</span></a></li></ul></li><li><a class="tocitem" href="../datasets/">Datasets</a></li><li><a class="tocitem" href="../benchmark/">Benchmark</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Fairness Algortihms</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Fairness Algortihms</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ashryaagr/Fairness.jl/blob/master/docs/src/algorithms.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Fairness-Algorithms"><a class="docs-heading-anchor" href="#Fairness-Algorithms">Fairness Algorithms</a><a id="Fairness-Algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Fairness-Algorithms" title="Permalink"></a></h1><p>Fairness.jl provides with various algorithms that can help in mitigating bias and improving fairness metrics.</p><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>These algorithms are wrappers. As demonstrated in last section, these wrappers can be used to compose a complex pipeline with more than 1 fairness algorithm. These wrappers can be used only with binary classifiers.</p><p>The fairness algorithms have been divided into 3 categories based on the parts in the pipeline that the algorithm can control. These 3 categories are Preprocessing, Postprocessing and Inprocessing[WIP].</p><h2 id="Preprocessing-Algorithms"><a class="docs-heading-anchor" href="#Preprocessing-Algorithms">Preprocessing Algorithms</a><a id="Preprocessing-Algorithms-1"></a><a class="docs-heading-anchor-permalink" href="#Preprocessing-Algorithms" title="Permalink"></a></h2><p>These are the algorithms that have control over the training data to be fed into machine learning model. This class of algorithms improves the representation of groups in the training data.</p><h3 id="ReweighingSampling-Algorithm"><a class="docs-heading-anchor" href="#ReweighingSampling-Algorithm">ReweighingSampling Algorithm</a><a id="ReweighingSampling-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#ReweighingSampling-Algorithm" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Fairness.ReweighingSamplingWrapper" href="#Fairness.ReweighingSamplingWrapper"><code>Fairness.ReweighingSamplingWrapper</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ReweighingSamplingWrapper</code></pre><p>ReweighingSamplingWrapper is a preprocessing algorithm wrapper in which Weights for each group-label combination is calculated. Using the calculated weights, rows are sampled uniformly. The weight is used to sample uniformly. The number of datapoints used to train after sampling from the reweighed dataset can be controlled by <code>factor</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/preprocessing/reweighing.jl#LL83-L89">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Fairness.ReweighingSamplingWrapper-Tuple{}" href="#Fairness.ReweighingSamplingWrapper-Tuple{}"><code>Fairness.ReweighingSamplingWrapper</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ReweighingSamplingWrapper(classifier=nothing, grp=:class, factor=1, rng=Random.GLOBAL_RNG)</code></pre><p>Instantiates a ReweighingSamplingWrapper which wrapper the classifier with the Reweighing fairness algorithm together with sampling. The sensitive attribute can be specified by the parameter <code>grp</code>. <code>factor</code>*number<em>of</em>samples<em>in</em>original_data datapoints are sampled using calculated weights and then used to train after sampling from the reweighed dataset. A negative or no value value for <code>factor</code> parameter instructs the algorithm to use the same number of datapoints as in original sample.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/preprocessing/reweighing.jl#LL98-L105">source</a></section></article><h3 id="Reweighing-Algorithm"><a class="docs-heading-anchor" href="#Reweighing-Algorithm">Reweighing Algorithm</a><a id="Reweighing-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#Reweighing-Algorithm" title="Permalink"></a></h3><p>This model being wrapped with this wrapper needs to support weights. If the model doesn&#39;t support training using weights, then error is thrown. In case weights are not supported by your desired model, them switch to ReweighingSampling Algorithm. To find the models in MLJ that support weights, execute:</p><pre><code class="language-julia">using MLJ
models(x-&gt; x.supports_weights)</code></pre><article class="docstring"><header><a class="docstring-binding" id="Fairness.ReweighingWrapper" href="#Fairness.ReweighingWrapper"><code>Fairness.ReweighingWrapper</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">ReweighingWrapper</code></pre><p>ReweighingWrapper is a preprocessing algorithm wrapper in which Weights for each group-label combination is calculated. These calculated weights are then passed to the classifier model which further uses it to make training fair.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/preprocessing/reweighing.jl#LL24-L29">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Fairness.ReweighingWrapper-Tuple{}" href="#Fairness.ReweighingWrapper-Tuple{}"><code>Fairness.ReweighingWrapper</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">ReweighingWrapper(classifier=nothing, grp=:class)</code></pre><p>Instantiates a ReweighingWrapper which wrapper the <code>classifier</code> with the Reweighing fairness algorithm. The sensitive attribute can be specified by the parameter <code>grp</code>. If <code>classifier</code> doesn&#39;t support weights while training, an error is thrown.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/preprocessing/reweighing.jl#LL36-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Fairness._calculateWeights" href="#Fairness._calculateWeights"><code>Fairness._calculateWeights</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Helper function for ReweighingWrapper and ReweighingSamplingWrapper. grps is an array of values of protected attribute. y is an array of ground truth values. Array of (Frequency) weights are returned from this function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/preprocessing/reweighing.jl#LL1-L5">source</a></section></article><h2 id="Postprocessing"><a class="docs-heading-anchor" href="#Postprocessing">Postprocessing</a><a id="Postprocessing-1"></a><a class="docs-heading-anchor-permalink" href="#Postprocessing" title="Permalink"></a></h2><p>These are the algorithms that have control over the final predictions. They can tweak final predictions to optimise fairness constraints.</p><h3 id="Equalized-Odds-Algorithm"><a class="docs-heading-anchor" href="#Equalized-Odds-Algorithm">Equalized Odds Algorithm</a><a id="Equalized-Odds-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#Equalized-Odds-Algorithm" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Fairness.EqOddsWrapper" href="#Fairness.EqOddsWrapper"><code>Fairness.EqOddsWrapper</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">EqOddsWrapper</code></pre><p>It is a postprocessing algorithm which uses Linear Programming to optimise the constraints for Equalized Odds.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/postprocessing/eqOdds.jl#LL1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Fairness.EqOddsWrapper-Tuple{}" href="#Fairness.EqOddsWrapper-Tuple{}"><code>Fairness.EqOddsWrapper</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">EqOddsWrapper(classifier=nothing, grp=:class)</code></pre><p>Instantiates EqOddsWrapper which wraps the classifier</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/postprocessing/eqOdds.jl#LL12-L16">source</a></section></article><h3 id="Calibrated-Equalized-Odds-Algorithm"><a class="docs-heading-anchor" href="#Calibrated-Equalized-Odds-Algorithm">Calibrated Equalized Odds Algorithm</a><a id="Calibrated-Equalized-Odds-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#Calibrated-Equalized-Odds-Algorithm" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Fairness.CalEqOddsWrapper" href="#Fairness.CalEqOddsWrapper"><code>Fairness.CalEqOddsWrapper</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">    CalEqOddsWrapper(classifier=nothing, grp=:class, fp_rate=1, fn_rate=1)</code></pre><p>Instantiates CalEqOddsWrapper which wraps the classifier</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/postprocessing/CalEqOdds.jl#LL15-L19">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Fairness.CalEqOddsWrapper-Tuple{}" href="#Fairness.CalEqOddsWrapper-Tuple{}"><code>Fairness.CalEqOddsWrapper</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">    CalEqOddsWrapper(classifier=nothing, grp=:class, fp_rate=1, fn_rate=1)</code></pre><p>Instantiates CalEqOddsWrapper which wraps the classifier</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/postprocessing/CalEqOdds.jl#LL15-L19">source</a></section></article><h3 id="LinProg-Algorithm"><a class="docs-heading-anchor" href="#LinProg-Algorithm">LinProg Algorithm</a><a id="LinProg-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#LinProg-Algorithm" title="Permalink"></a></h3><p>This algorithm supports all the metrics provided by Fairness.</p><article class="docstring"><header><a class="docstring-binding" id="Fairness.LinProgWrapper" href="#Fairness.LinProgWrapper"><code>Fairness.LinProgWrapper</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">LinProgWrapper</code></pre><p>It is a postprocessing algorithm that uses JuMP and Ipopt library to minimise error and satisfy the equality of specified specified measures for all groups at the same time. Automatic differentiation and gradient based optimisation is used to find probabilities with which the predictions are changed for each group.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/postprocessing/linprog.jl#LL18-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Fairness.LinProgWrapper-Tuple{}" href="#Fairness.LinProgWrapper-Tuple{}"><code>Fairness.LinProgWrapper</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">LinProgWrapper(classifier=nothing, grp=:class, measure=nothing, measures=nothing)</code></pre><p>Instantiates LinProgWrapper which wraps the classifier and containts the measure to optimised and the sensitive attribute(grp) You can optimize the all fairness metrics in measures. You can optimize for only a single metric using keyword measure.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/postprocessing/linprog.jl#LL31-L36">source</a></section></article><h2 id="Inprocessing"><a class="docs-heading-anchor" href="#Inprocessing">Inprocessing</a><a id="Inprocessing-1"></a><a class="docs-heading-anchor-permalink" href="#Inprocessing" title="Permalink"></a></h2><p>These are the algorithms that have control over the training process. They can modify the training process to optimise fairness constraints.</p><h3 id="Penalty-Algorithm"><a class="docs-heading-anchor" href="#Penalty-Algorithm">Penalty Algorithm</a><a id="Penalty-Algorithm-1"></a><a class="docs-heading-anchor-permalink" href="#Penalty-Algorithm" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Fairness.PenaltyWrapper" href="#Fairness.PenaltyWrapper"><code>Fairness.PenaltyWrapper</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">PenaltyWrapper</code></pre><p>It is an inprocessing algorithm that wraps a Probabilistic classifier. Optimal thresholds for each group in protected attribute is found to minimise accuracy+ alpha*fairness_measure^2. Gradients are used to find optimal threshold values. alpha controls the fairness accuracy tradeoff.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/inprocessing/penalty.jl#LL1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Fairness.PenaltyWrapper-Tuple{}" href="#Fairness.PenaltyWrapper-Tuple{}"><code>Fairness.PenaltyWrapper</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">PenaltyWrapper(classifier=nothing, grp=:class, measure, alpha=1, n_iters=1000, lr=0.01)</code></pre><p>Instantiates PenaltyWrapper which wraps the classifier and contains measure to be optimised. It also provides various hyperparameters to the wrapper.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ashryaagr/Fairness.jl/blob/63b19d58828c30acf8b891b14c2f87646d9cf275/src/algorithms/inprocessing/penalty.jl#LL17-L22">source</a></section></article><h2 id="Composability"><a class="docs-heading-anchor" href="#Composability">Composability</a><a id="Composability-1"></a><a class="docs-heading-anchor-permalink" href="#Composability" title="Permalink"></a></h2><p>Fairness.jl provides you the ability to easily use multiple fairness algorithms on top of each other. A fairness algorithm can be added over another fairness algorithm by simply wrapping the previous wrapped model with the new wrapper. Fairness.jl handles everything else for you! The use of wrappers provides you the ability to add as many algorithms as you want!!</p><pre><code class="language-julia-repl">julia&gt; using Fairness, MLJ

julia&gt; X, y, _ = @load_toydata;

julia&gt; model = ConstantClassifier();

julia&gt; wrappedModel = ReweighingSamplingWrapper(classifier=model, grp=:Sex);

julia&gt; wrappedModel2 = EqOddsWrapper(classifier=wrappedModel, grp=:Sex);

julia&gt; mch = machine(wrappedModel2, X, y);

julia&gt; fit!(mch)
[ Info: Training [34mMachine{EqOddsWrapper{ReweighingSamplingWrapper{ConstantClassifier}},…} @874[39m.
[ Info: Training [34mMachine{ReweighingSamplingWrapper{ConstantClassifier},…} @345[39m.
[ Info: Training [34mMachine{ConstantClassifier,…} @187[39m.
[34mMachine{EqOddsWrapper{ReweighingSamplingWrapper{ConstantClassifier}},…} @874[39m trained 1 time; caches data
  args:
    1:	[34mSource @004[39m ⏎ `Table{Union{AbstractVector{Multiclass{2}}, AbstractVector{Multiclass{3}}}}`
    2:	[34mSource @050[39m ⏎ `AbstractVector{Multiclass{2}}`

julia&gt; ŷ = predict(mch, X);</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../measures/">« Measures</a><a class="docs-footer-nextpage" href="../datasets/">Datasets »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 28 June 2021 13:45">Monday 28 June 2021</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
